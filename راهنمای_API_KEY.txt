🔑 راهنمای دریافت و تنظیم API Key
═══════════════════════════════════════════════════════════

⚠️ مشکل فعلی:
API Key شما خطای 403 (Permission Denied) می‌دهد.
این یعنی API Key نامعتبر است یا محدودیت دارد.

═══════════════════════════════════════════════════════════

📋 مراحل دریافت API Key صحیح:

1️⃣ رفتن به Google AI Studio
   ─────────────────────────────────────
   لینک: https://aistudio.google.com/app/apikey
   
   یا: https://makersuite.google.com/app/apikey

2️⃣ ورود با اکانت Google
   ─────────────────────────────────────
   • از اکانت Gmail خود استفاده کنید
   • اگر اکانت ندارید، یکی بسازید

3️⃣ ایجاد API Key
   ─────────────────────────────────────
   • روی "Create API Key" کلیک کنید
   • یا "Get API Key" یا "+ Create API key"
   
   گزینه‌ها:
   • Create API key in new project (توصیه می‌شود)
   • یا انتخاب پروژه موجود

4️⃣ کپی کردن API Key
   ─────────────────────────────────────
   • API Key نمایش داده می‌شود
   • روی آیکون کپی کلیک کنید
   • یا دستی کپی کنید
   
   ⚠️ مهم: API Key را در جای امنی ذخیره کنید

5️⃣ فعال‌سازی API
   ─────────────────────────────────────
   ممکن است نیاز باشد:
   • Generative Language API را فعال کنید
   • شرایط و ضوابط را بپذیرید
   • اطلاعات پروژه را تکمیل کنید

═══════════════════════════════════════════════════════════

🔧 تنظیم API Key در پروژه:

روش 1: دستی
   ─────────────────────────────────────
   1. فایل app.py را باز کنید
   2. خط 11 را پیدا کنید:
      API_KEY = "..."
   3. API Key جدید را جایگزین کنید
   4. فایل را ذخیره کنید

روش 2: با دستور
   ─────────────────────────────────────
   در چت به من بگویید:
   "API Key جدیدم: YOUR_NEW_API_KEY"
   
   من خودکار جایگزین می‌کنم

═══════════════════════════════════════════════════════════

🧪 تست API Key:

بعد از تنظیم، تست کنید:

   cd lesson-planner
   python test_system.py

اگر موفق بود، باید ببینید:
   ✓ اتصال AI

═══════════════════════════════════════════════════════════

❓ مشکلات رایج:

1. خطای 403 (Permission Denied)
   ─────────────────────────────────────
   علت‌ها:
   • API Key نامعتبر است
   • API فعال نشده
   • محدودیت منطقه‌ای
   
   راه‌حل:
   • API Key جدید بگیرید
   • Generative Language API را فعال کنید
   • از VPN استفاده کنید (اگر در ایران هستید)

2. خطای 429 (Too Many Requests)
   ─────────────────────────────────────
   علت:
   • محدودیت تعداد درخواست
   
   راه‌حل:
   • چند دقیقه صبر کنید
   • یا API Key دیگری بگیرید

3. خطای 400 (Invalid Argument)
   ─────────────────────────────────────
   علت:
   • نام مدل اشتباه است
   
   راه‌حل:
   • از مدل‌های معتبر استفاده کنید:
     - gemini-pro
     - gemini-1.5-flash
     - gemini-1.5-pro

═══════════════════════════════════════════════════════════

🌐 استفاده در ایران:

اگر در ایران هستید:
   • ممکن است نیاز به VPN باشید
   • یا از Shecan استفاده کنید
   • یا DNS را تغییر دهید:
     - 178.22.122.100
     - 185.51.200.2

═══════════════════════════════════════════════════════════

💰 محدودیت‌های رایگان:

Google Gemini API رایگان:
   • 60 درخواست در دقیقه
   • 1500 درخواست در روز
   • برای استفاده شخصی کافی است

اگر نیاز به بیشتر دارید:
   • به نسخه پولی ارتقا دهید
   • یا چند API Key بگیرید

═══════════════════════════════════════════════════════════

📞 کمک بیشتر:

اگر باز هم مشکل دارید:
   1. اسکرین‌شات از صفحه API Key بگیرید
   2. خطای دقیق را کپی کنید
   3. به من نشان دهید

═══════════════════════════════════════════════════════════
